{"version":3,"sources":["firebase.ts","components/MainPage.tsx","App.tsx","index.tsx"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","F_MESSAGING","messaging","useStyles","makeStyles","theme","createStyles","root","flexGrow","menuButton","marginRight","spacing","title","askUserPermission","a","Notification","requestPermission","useState","token","setToken","useEffect","then","getToken","catch","err","console","log","navigator","serviceWorker","addEventListener","message","classes","AppBar","position","Typography","variant","className","Button","color","onClick","ready","reg","pushManager","subscribe","applicationServerKey","userVisibleOnly","sub","endpoint","e","permission","warn","error","App","isWorkerLoaded","setIsWorkerLoaded","register","registration","scope","useServiceWorker","exact","path","MainPage","to","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.115746ff.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyDbOax-9wp5A22eUTIrgW5hAzu6V65i3fY\",\r\n    authDomain: \"cuando-vence.firebaseapp.com\",\r\n    databaseURL: \"https://cuando-vence.firebaseio.com\",\r\n    projectId: \"cuando-vence\",\r\n    storageBucket: \"cuando-vence.appspot.com\",\r\n    messagingSenderId: \"350697025690\",\r\n    appId: \"1:350697025690:web:28aa0c17e120f1ed922f23\",\r\n    measurementId: \"G-M0T9CQ2GB3\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.analytics();\r\n\r\nexport default firebase","import React, {useEffect, useState} from \"react\";\r\nimport {AppBar, Button, createStyles, Theme, Typography} from \"@material-ui/core\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport firebase from \"../firebase\";\r\n\r\nlet F_MESSAGING = firebase.messaging();\r\n\r\n    const useStyles = makeStyles((theme: Theme) =>\r\n        createStyles({\r\n            root: {\r\n                flexGrow: 1,\r\n            },\r\n            menuButton: {\r\n                marginRight: theme.spacing(2),\r\n            },\r\n            title: {\r\n                flexGrow: 1,\r\n            },\r\n        }),\r\n    );\r\nasync function askUserPermission() {\r\n    return await Notification.requestPermission();\r\n}\r\n\r\nexport default ({firebase}:any)=>{\r\n    const [token,setToken] =useState('')\r\n    useEffect(()=>{\r\n        const messaging =  F_MESSAGING;\r\n        askUserPermission().then(async function() {\r\n            const token = await messaging.getToken();\r\n            return token\r\n        }).then(setToken)\r\n            .catch(function(err) {\r\n            console.log(\"Unable to get permission to notify.\", err);\r\n         //   alert(\"Unable to get permission to notify.\"+ err);\r\n        });\r\n      //  messaging.getToken().then(setToken)\r\n\r\n        navigator.serviceWorker.addEventListener(\"message\", (message) => console.log(message));\r\n    },[])\r\n\r\n    const classes = useStyles();\r\n    let clickSendNotification = ()=> {\r\n\r\n    }\r\n//     clickSendNotification = ()=>console.log({type:\"notify\",w:navigator.serviceWorker.ready});\r\n\r\n    function subscribeUser() {\r\n        navigator.serviceWorker.ready.then(function(reg) {\r\n\r\n            reg.pushManager.subscribe({\r\n                applicationServerKey:\"BGNFTJy7-RHmBkIJsqzRIyIv4Z2qPoChB7A2Wqzmi_n8zMVxzcPSy1ksrgha3CFma8JCqX4AfJ6W4_BTZDRjST8\",\r\n                userVisibleOnly: true\r\n            }).then(function(sub) {\r\n                console.log('Endpoint URL: ', sub.endpoint);\r\n            }).catch(function(e) {\r\n                if (Notification.permission === 'denied') {\r\n                    console.warn('Permission for notifications was denied');\r\n                } else {\r\n                    console.error('Unable to subscribe to push', e);\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    return  <>\r\n        <AppBar position=\"static\"> <Typography variant=\"h6\" className={classes.title} >\r\n            Cuando vence\r\n            </Typography>\r\n        </AppBar>\r\n        <br/>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={clickSendNotification} > Show Notif after 3 seconds</Button>\r\n        v13\r\n\r\n        <Button variant=\"outlined\" color=\"primary\" onClick={askUserPermission} > ask User Permission</Button>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={subscribeUser} > subscribe User</Button>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={()=>null} > Cancel suscription</Button>\r\n\r\n        token: {token}\r\n    </>\r\n}\r\n\r\n","import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport MainPage from \"./components/MainPage\";\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Route,\n    Redirect\n} from \"react-router-dom\";\nimport firebase from \"./firebase\";\n\n\nfunction App({firebase}:any) {\n    const [isWorkerLoaded,setIsWorkerLoaded] = useState(false)\n    useEffect(()=>{\n\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker\n            .register( ' /cuando-vence/build/firebase-messaging-sw.js'/*,{scope:\"firebase-cloud-messaging-push-scope\"}*/)\n            .then((registration) => {\n                console.log(\"Registration successful, scope is:\", registration.scope);\n                //     alert(\"Registration successful, scope is:\"+ registration.scope);\n                firebase.messaging().useServiceWorker(registration);\n                setIsWorkerLoaded(true)\n            })\n            .catch(function (err) {\n                console.log(\"Service worker registration failed, error:\", err);\n                //    alert(\"Service worker registration failed, error:\"+ err);\n               // setIsWorkerLoaded(true)\n\n            });\n    }\n    },[])\n\n    if (!isWorkerLoaded)\n        return <div>Loading...</div>\n\n    return (\n    <div className=\"App\">\n        <Router>\n            <Route exact path=\"/\" >\n                <MainPage firebase={firebase} />\n            </Route>\n            <Route exact path=\"/cuando-vence/build\">\n                <MainPage firebase={firebase} />\n            </Route>\n            <Route exact path=\"/firebase-messaging-sw.js\">\n               <div></div>\n            </Route>\n\n            <Route exact path=\"/firebase-cloud-messaging-push-scope\">\n                <Redirect to=\"/asas\" />\n            </Route>\n            <Route exact path=\"/a\">\n                <div>asasa</div>\n            </Route>\n        </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport firebase from './firebase';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App firebase={firebase} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\n//serviceWorker.register();\n\n"],"sourceRoot":""}