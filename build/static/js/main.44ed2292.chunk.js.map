{"version":3,"sources":["logo192.png","firebase.ts","containers/AppNotification.ts","components/MainPage.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","options","body","icon","logo","vibrate","tag","image","actions","action","title","showNotification","aTitle","navigator","serviceWorker","ready","then","setTimeout","console","log","F_MESSAGING","messaging","useStyles","makeStyles","theme","createStyles","root","flexGrow","menuButton","marginRight","spacing","askUserPermission","a","Notification","requestPermission","useState","token","setToken","useEffect","getToken","catch","err","addEventListener","message","classes","AppBar","position","Typography","variant","className","Button","color","onClick","reg","pushManager","subscribe","applicationServerKey","userVisibleOnly","sub","endpoint","e","permission","warn","error","firestore","collection","get","querySnapshot","forEach","doc","id","data","App","isWorkerLoaded","setIsWorkerLoaded","register","registration","scope","useServiceWorker","exact","path","MainPage","to","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","self","event","ReactDOM","render","StrictMode","document","getElementById","process","URL","href","origin","fetch","headers","response","contentType","status","indexOf","unregister","reload","checkValidServiceWorker","w"],"mappings":"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","file":"static/js/main.44ed2292.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import firebase from \"firebase\";\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyDbOax-9wp5A22eUTIrgW5hAzu6V65i3fY\",\r\n    authDomain: \"cuando-vence.firebaseapp.com\",\r\n    databaseURL: \"https://cuando-vence.firebaseio.com\",\r\n    projectId: \"cuando-vence\",\r\n    storageBucket: \"cuando-vence.appspot.com\",\r\n    messagingSenderId: \"350697025690\",\r\n    appId: \"1:350697025690:web:28aa0c17e120f1ed922f23\",\r\n    measurementId: \"G-M0T9CQ2GB3\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nfirebase.analytics();\r\n\r\nexport default firebase","import logo from '../logo192.png';\r\nconst text = \"Take a look at this brand new t-shirt!\";\r\nconst title = \"New Product near to expire\";\r\nconst options = {\r\n    body: text,\r\n    icon: logo,\r\n    vibrate: [200, 100, 200],\r\n    tag: \"new-product\",\r\n    image: logo,\r\n  //  badge: \"https://spyna.it/icons/android-icon-192x192.png\",\r\n    actions: [{ action: \"Detail\", title: \"View\"\r\n       // , icon: \"https://via.placeholder.com/128/ff0000\"\r\n    }]\r\n};\r\n\r\n\r\nexport const showNotification =(aTitle?: string | undefined,)=>navigator.serviceWorker.ready.then(function(serviceWorker) {\r\n    setTimeout(() => {\r\n        console.log(\"sent\")\r\n\r\n        serviceWorker.showNotification(aTitle || title, options);\r\n    }, 3000)\r\n});\r\nexport const log=()=>        alert(\"sent\")\r\n","import React, {useEffect, useState} from \"react\";\r\nimport {AppBar, Button, createStyles, Theme, Typography} from \"@material-ui/core\";\r\nimport {makeStyles} from \"@material-ui/core/styles\";\r\nimport firebase from \"../firebase\";\r\nimport {showNotification} from \"../containers/AppNotification\";\r\n\r\nlet F_MESSAGING = firebase.messaging();\r\n\r\n    const useStyles = makeStyles((theme: Theme) =>\r\n        createStyles({\r\n            root: {\r\n                flexGrow: 1,\r\n            },\r\n            menuButton: {\r\n                marginRight: theme.spacing(2),\r\n            },\r\n            title: {\r\n                flexGrow: 1,\r\n            },\r\n        }),\r\n    );\r\nasync function askUserPermission() {\r\n    return await Notification.requestPermission();\r\n}\r\n\r\nexport default ({firebase}:any)=>{\r\n    const [token,setToken] =useState('')\r\n    useEffect(()=>{\r\n        const messaging =  F_MESSAGING;\r\n        askUserPermission().then(async function() {\r\n            const token = await messaging.getToken();\r\n            return token\r\n        }).then(setToken)\r\n            .catch(function(err) {\r\n            console.log(\"Unable to get permission to notify.\", err);\r\n         //   alert(\"Unable to get permission to notify.\"+ err);\r\n        });\r\n      //  messaging.getToken().then(setToken)\r\n\r\n        navigator.serviceWorker.addEventListener(\"message\", (message) => console.log(message));\r\n    },[])\r\n\r\n    const classes = useStyles();\r\n    let clickSendNotification = ()=> {\r\n        showNotification(\"asas\")\r\n    }\r\n//     clickSendNotification = ()=>console.log({type:\"notify\",w:navigator.serviceWorker.ready});\r\n\r\n    function subscribeUser() {\r\n        navigator.serviceWorker.ready.then(function(reg) {\r\n\r\n            reg.pushManager.subscribe({\r\n                applicationServerKey:\"BGNFTJy7-RHmBkIJsqzRIyIv4Z2qPoChB7A2Wqzmi_n8zMVxzcPSy1ksrgha3CFma8JCqX4AfJ6W4_BTZDRjST8\",\r\n                userVisibleOnly: true\r\n            }).then(function(sub) {\r\n                console.log('Endpoint URL: ', sub.endpoint);\r\n            }).catch(function(e) {\r\n                if (Notification.permission === 'denied') {\r\n                    console.warn('Permission for notifications was denied');\r\n                } else {\r\n                    console.error('Unable to subscribe to push', e);\r\n                }\r\n            });\r\n        })\r\n    }\r\n\r\n    let loadProducts=() => {\r\n        const db = firebase.firestore();\r\n        db.collection(\"products\").get().then((querySnapshot: any) => {\r\n            querySnapshot.forEach((doc: { id: any; data: () => any; }) => {\r\n                console.log(`${doc.id} => `,doc.data());\r\n            });\r\n            console.log(\"snap\", querySnapshot)\r\n        });\r\n    }\r\n\r\n    return  <>\r\n        <AppBar position=\"static\"> <Typography variant=\"h6\" className={classes.title} >\r\n            Cuando vence\r\n            </Typography>\r\n        </AppBar>\r\n        <br/>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={clickSendNotification} > Show Notif after 3 seconds</Button>\r\n        v13\r\n\r\n        <Button variant=\"outlined\" color=\"primary\" onClick={askUserPermission} > ask User Permission</Button>\r\n        <Button variant=\"contained\" color=\"primary\" onClick={subscribeUser} > subscribe User</Button>\r\n        <br />\r\n        <Button variant=\"outlined\" color=\"primary\" onClick={loadProducts} > Load data</Button>\r\n\r\n        token: {token}\r\n    </>\r\n}\r\n\r\n","import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport MainPage from \"./components/MainPage\";\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Route,\n    Redirect\n} from \"react-router-dom\";\nimport firebase from \"./firebase\";\n\n\nfunction App({firebase}:any) {\n    const [isWorkerLoaded,setIsWorkerLoaded] = useState(false)\n    useEffect(()=>{\n\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker\n            .register( ' /cuando-vence/build/firebase-messaging-sw.js'/*,{scope:\"firebase-cloud-messaging-push-scope\"}*/)\n            .then((registration) => {\n                console.log(\"Registration successful, scope is:\", registration.scope);\n                //     alert(\"Registration successful, scope is:\"+ registration.scope);\n                firebase.messaging().useServiceWorker(registration);\n                setIsWorkerLoaded(true)\n            })\n            .catch(function (err) {\n                console.log(\"Service worker registration failed, error:\", err);\n                //    alert(\"Service worker registration failed, error:\"+ err);\n               // setIsWorkerLoaded(true)\n\n            });\n    }\n    },[])\n\n    if (!isWorkerLoaded)\n        return <div>Loading...</div>\n\n    return (\n    <div className=\"App\">\n        <Router>\n            <Route exact path=\"/\" >\n                <MainPage firebase={firebase} />\n            </Route>\n            <Route exact path=\"/cuando-vence/build\">\n                <MainPage firebase={firebase} />\n            </Route>\n            <Route exact path=\"/firebase-messaging-sw.js\">\n               <div></div>\n            </Route>\n\n            <Route exact path=\"/firebase-cloud-messaging-push-scope\">\n                <Redirect to=\"/asas\" />\n            </Route>\n            <Route exact path=\"/a\">\n                <div>asasa</div>\n            </Route>\n        </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nimport {showNotification} from \"./containers/AppNotification\";\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if ( /*process.env.NODE_ENV === 'production' && */ 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    console.log( \"URL\",process.env.PUBLIC_URL)\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then((w) => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n          /* eslint-disable-next-line no-restricted-globals */\n          w.addEventListener(\n              \"message\",\n              function(e) {\n                console.log(\"lalal12312\",e);\n                showNotification()\n              },\n              false\n          );\n\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  console.log(\"leo will register sw\")\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    }).then(()=> {\n        console.log(\"lalal77777\");\n        showNotification()\n      }\n\n  );\n\n\n\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n\n/* eslint-disable-next-line no-restricted-globals */\nself.addEventListener(\"push\", function(e) {\n  console.log(\"lalal888\",e);\n  showNotification()\n})\n\n/* eslint-disable-next-line no-restricted-globals */\naddEventListener('push', (event) => {\n  console.log(\"lalal9999\",event);\n\n});\n\n\n\n//self.onmessage = (e:MessageEvent) => {\n//  console.log(\"sarasa\")\n//  if (e.data==\"message\"){\n//    // @ts-ignore\n//    console.log(e.target?.value)\n//    showNotification()\n//    /* eslint-disable-next-line no-restricted-globals */\n//    // postMessage('result','result');\n//  }\n//}\n/* eslint-disable-next-line no-restricted-globals */\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport firebase from './firebase';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App firebase={firebase} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n//serviceWorker.unregister();\nserviceWorker.register();\n\n"],"sourceRoot":""}